{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 14, "column": 0}, "map": {"version":3,"sources":["file:///Users/davidyoung/Desktop/Valve%20Academy%20web/src/components/WorkflowActions.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/components/WorkflowActions.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/WorkflowActions.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAsS,GACnU,oEACA","ignoreList":[0]}},
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///Users/davidyoung/Desktop/Valve%20Academy%20web/src/components/WorkflowActions.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/components/WorkflowActions.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/WorkflowActions.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAkR,GAC/S,gDACA","ignoreList":[0]}},
    {"offset": {"line": 42, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 50, "column": 0}, "map": {"version":3,"sources":["file:///Users/davidyoung/Desktop/Valve%20Academy%20web/src/app/requests/%5Breference%5D/page.tsx"],"sourcesContent":["import prisma from \"@/lib/prisma\";\nimport { getServerSession } from \"next-auth\";\nimport { authOptions } from \"@/lib/auth\";\nimport { redirect } from \"next/navigation\";\nimport { Calendar, CheckCircle, Clock, MapPin, DollarSign, FileText } from \"lucide-react\";\nimport Link from \"next/link\";\nimport WorkflowActions from \"@/components/WorkflowActions\";\n\nexport default async function RequestSummaryPage(props: { params: Promise<{ reference: string }> }) {\n    const params = await props.params;\n    const session = await getServerSession(authOptions);\n\n    // Note: ideally check if user is allowed to view this specific request (Sales=own, Trainer/Admin/Approver=relevant)\n    // For MVP, if logged in, we fetch. (Add specific RBAC check later alongside data fetch)\n\n    const request = await prisma.trainingRequest.findUnique({\n        where: { reference: params.reference },\n        include: { module: true, salesperson: true, assignedTrainer: true },\n    });\n\n    if (!request) {\n        return <div className=\"container mx-auto p-8 text-center\">Request not found</div>;\n    }\n\n    // Simple RBAC check: if Sales, must be theirs. If other, allowed.\n    if (session?.user && (session.user as any).role === \"SALES\" && request.salespersonId !== (session.user as any).id) {\n        return <div className=\"container mx-auto p-8 text-center text-red-500\">Unauthorized to view this request</div>;\n    }\n\n    const statusColors: Record<string, string> = {\n        SUBMITTED: \"text-yellow-500\",\n        AWAITING_TRAINER_CONFIRMATION: \"text-orange-500\",\n        TRAINER_CONFIRMED: \"text-blue-500\",\n        CONFIRMED: \"text-green-500\",\n        REJECTED: \"text-red-500\",\n    };\n\n    return (\n        <div className=\"max-w-4xl mx-auto space-y-8\">\n            {/* Header */}\n            <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 border-b border-gray-200 pb-6\">\n                <div>\n                    <h1 className=\"text-2xl font-bold flex items-center gap-3 text-celeros-blue-800\">\n                        <FileText className=\"text-celeros-orange\" />\n                        Request {request.reference}\n                    </h1>\n                    <p className=\"text-gray-500 mt-1\">Created on {request.createdAt.toLocaleDateString()}</p>\n                </div>\n                <div className={`px-4 py-2 rounded-full border font-mono font-bold ${statusColors[request.status] || \"text-gray-500 border-gray-200 bg-gray-100\"}`}>\n                    {request.status.replace(/_/g, \" \")}\n                </div>\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8\">\n                {/* Main Details */}\n                <div className=\"md:col-span-2 space-y-6\">\n                    <div className=\"card space-y-4\">\n                        <h2 className=\"text-lg font-bold border-b border-gray-200 pb-2 text-celeros-blue-800\">Training Details</h2>\n                        <div className=\"grid grid-cols-2 gap-4 text-sm\">\n                            <div>\n                                <span className=\"block text-gray-500\">Module</span>\n                                <span className=\"block font-medium text-gray-900\">{request.module.title}</span>\n                            </div>\n                            <div>\n                                <span className=\"block text-gray-500\">Delivery Type</span>\n                                <span className=\"block font-medium text-gray-900\">{request.deliveryType}</span>\n                            </div>\n                            <div>\n                                <span className=\"block text-gray-500\">Proposed Dates</span>\n                                <span className=\"block font-medium text-gray-900\">\n                                    {request.startDate.toLocaleDateString()} - {request.endDate.toLocaleDateString()}\n                                </span>\n                            </div>\n                            <div>\n                                <span className=\"block text-gray-500\">Attendees</span>\n                                <span className=\"block font-medium text-gray-900\">{request.numAttendees}</span>\n                            </div>\n                        </div>\n                        {request.siteDetails && (\n                            <div className=\"mt-4 pt-4 border-t border-gray-200\">\n                                <span className=\"block text-gray-500 mb-1\">Site Details</span>\n                                <p className=\"text-gray-700 text-sm\">{request.siteDetails}</p>\n                            </div>\n                        )}\n                    </div>\n\n                    <div className=\"card space-y-4\">\n                        <h2 className=\"text-lg font-bold border-b border-gray-200 pb-2 text-celeros-blue-800\">Customer Info</h2>\n                        <div className=\"grid grid-cols-2 gap-4 text-sm\">\n                            <div>\n                                <span className=\"block text-gray-500\">Customer Name</span>\n                                <span className=\"block font-medium text-gray-900\">{request.customerName}</span>\n                            </div>\n                            <div>\n                                <span className=\"block text-gray-500\">Customer Email</span>\n                                <span className=\"block font-medium text-gray-900\">{request.customerEmail}</span>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                {/* Sidebar / Actions */}\n                <div className=\"space-y-6\">\n                    <div className=\"card bg-celeros-blue-50 border-celeros-blue-100\">\n                        <h2 className=\"text-lg font-bold mb-4 flex items-center gap-2 text-celeros-blue-800\">\n                            <DollarSign size={20} className=\"text-celeros-blue-600\" /> Pricing\n                        </h2>\n                        <div className=\"flex justify-between items-end\">\n                            <span className=\"text-gray-600\">Total Quote</span>\n                            <span className=\"text-2xl font-bold text-celeros-blue-900\">${request.finalPrice.toLocaleString()}</span>\n                        </div>\n                        {request.discountPercent > 0 && (\n                            <p className=\"text-xs text-green-600 mt-2 text-right\">\n                                Includes {request.discountPercent}% discount\n                            </p>\n                        )}\n                    </div>\n\n                    <div className=\"card\">\n                        <h2 className=\"text-lg font-bold mb-4 text-celeros-blue-800\">Assigned Trainer</h2>\n                        {request.assignedTrainer ? (\n                            <div className=\"flex items-center gap-3\">\n                                <div className=\"w-10 h-10 rounded-full bg-celeros-blue-100 text-celeros-blue-800 flex items-center justify-center font-bold\">\n                                    {request.assignedTrainer.name?.charAt(0)}\n                                </div>\n                                <div>\n                                    <p className=\"font-medium text-gray-900\">{request.assignedTrainer.name}</p>\n                                    <p className=\"text-xs text-gray-500\">Trainer</p>\n                                </div>\n                            </div>\n                        ) : (\n                            <p className=\"text-sm text-gray-500 italic\">Pending assignment...</p>\n                        )}\n                    </div>\n\n                    <WorkflowActions\n                        requestId={request.id}\n                        currentStatus={request.status}\n                        userRole={(session?.user as any).role || \"\"}\n                    />\n                    <Link href=\"/requests\" className=\"btn btn-outline w-full justify-center\">\n                        Back to My Requests\n                    </Link>\n                </div>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}}]
}